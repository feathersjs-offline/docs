<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>FAQ | FeathersJS Offline-first</title>
    <meta name="generator" content="VuePress 1.7.1">
    
    <meta name="description" content="A REST and real-time API layer for modern applications">
    
    <link rel="preload" href="/docs/assets/css/0.styles.5bea0f23.css" as="style"><link rel="preload" href="/docs/assets/js/app.755caa04.js" as="script"><link rel="preload" href="/docs/assets/js/4.40f59cee.js" as="script"><link rel="preload" href="/docs/assets/js/71.3106b414.js" as="script"><link rel="prefetch" href="/docs/assets/js/1.99d78445.js"><link rel="prefetch" href="/docs/assets/js/10.45e919c5.js"><link rel="prefetch" href="/docs/assets/js/11.83c3d330.js"><link rel="prefetch" href="/docs/assets/js/12.82e67b5e.js"><link rel="prefetch" href="/docs/assets/js/13.6aa5e31e.js"><link rel="prefetch" href="/docs/assets/js/14.60a12577.js"><link rel="prefetch" href="/docs/assets/js/15.36fd5bc1.js"><link rel="prefetch" href="/docs/assets/js/16.92cf6eab.js"><link rel="prefetch" href="/docs/assets/js/17.6463a6de.js"><link rel="prefetch" href="/docs/assets/js/18.18ea4d85.js"><link rel="prefetch" href="/docs/assets/js/19.630d889d.js"><link rel="prefetch" href="/docs/assets/js/20.f546b268.js"><link rel="prefetch" href="/docs/assets/js/21.7afb7ba6.js"><link rel="prefetch" href="/docs/assets/js/22.f0312947.js"><link rel="prefetch" href="/docs/assets/js/23.286ed5d2.js"><link rel="prefetch" href="/docs/assets/js/24.34371823.js"><link rel="prefetch" href="/docs/assets/js/25.39b525c9.js"><link rel="prefetch" href="/docs/assets/js/26.02cc4dd4.js"><link rel="prefetch" href="/docs/assets/js/27.22978b7b.js"><link rel="prefetch" href="/docs/assets/js/28.aab8db49.js"><link rel="prefetch" href="/docs/assets/js/29.e422102b.js"><link rel="prefetch" href="/docs/assets/js/30.e742f42a.js"><link rel="prefetch" href="/docs/assets/js/31.33965f48.js"><link rel="prefetch" href="/docs/assets/js/32.a078f957.js"><link rel="prefetch" href="/docs/assets/js/33.48824de5.js"><link rel="prefetch" href="/docs/assets/js/34.bece4b87.js"><link rel="prefetch" href="/docs/assets/js/35.3503788d.js"><link rel="prefetch" href="/docs/assets/js/36.b3368ddb.js"><link rel="prefetch" href="/docs/assets/js/37.e9ab2d98.js"><link rel="prefetch" href="/docs/assets/js/38.beb58882.js"><link rel="prefetch" href="/docs/assets/js/39.36797e32.js"><link rel="prefetch" href="/docs/assets/js/40.f7e535c4.js"><link rel="prefetch" href="/docs/assets/js/41.7cc2fb79.js"><link rel="prefetch" href="/docs/assets/js/42.cdd5072a.js"><link rel="prefetch" href="/docs/assets/js/43.6d8f2b7b.js"><link rel="prefetch" href="/docs/assets/js/44.c61586cd.js"><link rel="prefetch" href="/docs/assets/js/45.0daab1dc.js"><link rel="prefetch" href="/docs/assets/js/46.b1cdf2d3.js"><link rel="prefetch" href="/docs/assets/js/47.e697328d.js"><link rel="prefetch" href="/docs/assets/js/48.0092dd76.js"><link rel="prefetch" href="/docs/assets/js/49.e4ce18c4.js"><link rel="prefetch" href="/docs/assets/js/5.cb064351.js"><link rel="prefetch" href="/docs/assets/js/50.2005b465.js"><link rel="prefetch" href="/docs/assets/js/51.a40c3f58.js"><link rel="prefetch" href="/docs/assets/js/52.220fdb75.js"><link rel="prefetch" href="/docs/assets/js/53.8ca1d8d6.js"><link rel="prefetch" href="/docs/assets/js/54.b807da69.js"><link rel="prefetch" href="/docs/assets/js/55.4f9b1887.js"><link rel="prefetch" href="/docs/assets/js/56.22afea52.js"><link rel="prefetch" href="/docs/assets/js/57.db78385b.js"><link rel="prefetch" href="/docs/assets/js/58.e037ce57.js"><link rel="prefetch" href="/docs/assets/js/59.7c26e33e.js"><link rel="prefetch" href="/docs/assets/js/6.250abb24.js"><link rel="prefetch" href="/docs/assets/js/60.c1a4dfa2.js"><link rel="prefetch" href="/docs/assets/js/61.3d52019b.js"><link rel="prefetch" href="/docs/assets/js/62.88a147dd.js"><link rel="prefetch" href="/docs/assets/js/63.a798bc42.js"><link rel="prefetch" href="/docs/assets/js/64.cfa3e77d.js"><link rel="prefetch" href="/docs/assets/js/65.cea729e7.js"><link rel="prefetch" href="/docs/assets/js/66.e8170b30.js"><link rel="prefetch" href="/docs/assets/js/67.52444b7c.js"><link rel="prefetch" href="/docs/assets/js/68.18605924.js"><link rel="prefetch" href="/docs/assets/js/69.bb93a4d0.js"><link rel="prefetch" href="/docs/assets/js/7.af6eda37.js"><link rel="prefetch" href="/docs/assets/js/70.96a3b576.js"><link rel="prefetch" href="/docs/assets/js/72.43c5f931.js"><link rel="prefetch" href="/docs/assets/js/73.6620868e.js"><link rel="prefetch" href="/docs/assets/js/74.f27b4755.js"><link rel="prefetch" href="/docs/assets/js/8.67c23c5f.js"><link rel="prefetch" href="/docs/assets/js/9.9c263f6c.js"><link rel="prefetch" href="/docs/assets/js/vendors~docsearch.7276d59c.js">
    <link rel="stylesheet" href="/docs/assets/css/0.styles.5bea0f23.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/" class="home-link router-link-active"><img src="/docs/img/feathers-offline-first.png" alt="FeathersJS Offline-first" class="logo"></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="/docs/guides/" class="nav-link">Guides</a></div><div class="nav-item"><a href="/docs/api/" class="nav-link">API</a></div><div class="nav-item"><a href="/docs/cookbook/" class="nav-link">Cookbook</a></div><div class="nav-item"><a href="/docs/help/" class="nav-link router-link-active">Help</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Ecosystem</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://docs.feathersjs.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Feathersjs (v4 Crow, current)
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/feathersjs/awesome-feathersjs" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Awesome Feathersjs
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.youtube.com/playlist?list=PLwSdIiqnDlf_lb5y1liQK2OW5daXYgKOe" target="_blank" rel="noopener noreferrer" class="nav-link external">
  YouTube Playlist
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://vuex.feathersjs.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Feathers VueX
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://hooks-common.feathersjs.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Common Hooks
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><h4>Other versions</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://dove.docs.feathersjs.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Dove (v5, next)
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://buzzard.docs.feathersjs.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Buzzard (v3)
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://auk.docs.feathersjs.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Auk (v2)
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div> <a href="https://github.com/feathersjs-offline/docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav> <a href="#" style="margin-left:20px"><span class="tooltip"><span alt-text="Toggle dark mode"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="lightbulb" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 352 512" class="svg-inline--fa fa-lightbulb fa-w-11"><path fill="currentColor" d="M96.06 454.35c.01 6.29 1.87 12.45 5.36 17.69l17.09 25.69a31.99 31.99 0 0 0 26.64 14.28h61.71a31.99 31.99 0 0 0 26.64-14.28l17.09-25.69a31.989 31.989 0 0 0 5.36-17.69l.04-38.35H96.01l.05 38.35zM0 176c0 44.37 16.45 84.85 43.56 115.78 16.52 18.85 42.36 58.23 52.21 91.45.04.26.07.52.11.78h160.24c.04-.26.07-.51.11-.78 9.85-33.22 35.69-72.6 52.21-91.45C335.55 260.85 352 220.37 352 176 352 78.61 272.91-.3 175.45 0 73.44.31 0 82.97 0 176zm176-80c-44.11 0-80 35.89-80 80 0 8.84-7.16 16-16 16s-16-7.16-16-16c0-61.76 50.24-112 112-112 8.84 0 16 7.16 16 16s-7.16 16-16 16z"></path></svg></span><span class="tooltiptext">Toggle dark mode</span></span></a></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/docs/guides/" class="nav-link">Guides</a></div><div class="nav-item"><a href="/docs/api/" class="nav-link">API</a></div><div class="nav-item"><a href="/docs/cookbook/" class="nav-link">Cookbook</a></div><div class="nav-item"><a href="/docs/help/" class="nav-link router-link-active">Help</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Ecosystem</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://docs.feathersjs.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Feathersjs (v4 Crow, current)
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/feathersjs/awesome-feathersjs" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Awesome Feathersjs
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.youtube.com/playlist?list=PLwSdIiqnDlf_lb5y1liQK2OW5daXYgKOe" target="_blank" rel="noopener noreferrer" class="nav-link external">
  YouTube Playlist
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://vuex.feathersjs.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Feathers VueX
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://hooks-common.feathersjs.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Common Hooks
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><h4>Other versions</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://dove.docs.feathersjs.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Dove (v5, next)
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://buzzard.docs.feathersjs.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Buzzard (v3)
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://auk.docs.feathersjs.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Auk (v2)
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div> <a href="https://github.com/feathersjs-offline/docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Help</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/help/" aria-current="page" class="sidebar-link">Getting Help</a></li><li><a href="/docs/help/faq.html" aria-current="page" class="active sidebar-link">FAQ</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/help/faq.html#why-should-i-use-feathers" class="sidebar-link">Why should I use Feathers?</a></li><li class="sidebar-sub-header"><a href="/docs/help/faq.html#is-feathers-production-ready" class="sidebar-link">Is Feathers production ready?</a></li><li class="sidebar-sub-header"><a href="/docs/help/faq.html#what-node-versions-does-feathers-support" class="sidebar-link">What Node versions does Feathers support</a></li><li class="sidebar-sub-header"><a href="/docs/help/faq.html#how-do-i-create-custom-methods" class="sidebar-link">How do I create custom methods?</a></li><li class="sidebar-sub-header"><a href="/docs/help/faq.html#how-do-i-do-nested-or-custom-routes" class="sidebar-link">How do I do nested or custom routes?</a></li><li class="sidebar-sub-header"><a href="/docs/help/faq.html#why-are-you-using-jwt-for-sessions" class="sidebar-link">Why are you using JWT for sessions</a></li><li class="sidebar-sub-header"><a href="/docs/help/faq.html#can-you-support-another-database" class="sidebar-link">Can you support another database?</a></li><li class="sidebar-sub-header"><a href="/docs/help/faq.html#how-do-i-watch-for-database-changes" class="sidebar-link">How do I watch for database changes?</a></li><li class="sidebar-sub-header"><a href="/docs/help/faq.html#i-am-not-getting-real-time-events" class="sidebar-link">I am not getting real-time events</a></li><li class="sidebar-sub-header"><a href="/docs/help/faq.html#how-do-i-do-search" class="sidebar-link">How do I do search?</a></li><li class="sidebar-sub-header"><a href="/docs/help/faq.html#why-am-i-not-getting-json-errors" class="sidebar-link">Why am I not getting JSON errors?</a></li><li class="sidebar-sub-header"><a href="/docs/help/faq.html#why-am-i-not-getting-the-correct-http-error-code" class="sidebar-link">Why am I not getting the correct HTTP error code</a></li><li class="sidebar-sub-header"><a href="/docs/help/faq.html#how-can-i-do-custom-methods-like-findorcreate" class="sidebar-link">How can I do custom methods like findOrCreate?</a></li><li class="sidebar-sub-header"><a href="/docs/help/faq.html#how-do-i-render-templates" class="sidebar-link">How do I render templates?</a></li><li class="sidebar-sub-header"><a href="/docs/help/faq.html#how-do-i-create-channels-or-rooms" class="sidebar-link">How do I create channels or rooms</a></li><li class="sidebar-sub-header"><a href="/docs/help/faq.html#how-do-i-do-validation" class="sidebar-link">How do I do validation?</a></li><li class="sidebar-sub-header"><a href="/docs/help/faq.html#how-do-i-do-associations" class="sidebar-link">How do I do associations?</a></li><li class="sidebar-sub-header"><a href="/docs/help/faq.html#sequelize-models-and-associations" class="sidebar-link">Sequelize models and associations</a></li><li class="sidebar-sub-header"><a href="/docs/help/faq.html#how-do-i-access-the-request-object-in-hooks-or-services" class="sidebar-link">How do I access the request object in hooks or services?</a></li><li class="sidebar-sub-header"><a href="/docs/help/faq.html#how-do-i-mount-sub-apps" class="sidebar-link">How do I mount sub apps?</a></li><li class="sidebar-sub-header"><a href="/docs/help/faq.html#how-do-i-do-some-processing-after-sending-the-response-to-the-user" class="sidebar-link">How do I do some processing after sending the response to the user?</a></li><li class="sidebar-sub-header"><a href="/docs/help/faq.html#how-do-i-debug-my-app" class="sidebar-link">How do I debug my app</a></li><li class="sidebar-sub-header"><a href="/docs/help/faq.html#possible-eventemitter-memory-leak-detected-warning" class="sidebar-link">possible EventEmitter memory leak detected warning</a></li><li class="sidebar-sub-header"><a href="/docs/help/faq.html#why-can-t-i-pass-params-from-the-client" class="sidebar-link">Why can't I pass params from the client?</a></li><li class="sidebar-sub-header"><a href="/docs/help/faq.html#my-queries-with-null-values-aren-t-working" class="sidebar-link">My queries with null values aren't working</a></li><li class="sidebar-sub-header"><a href="/docs/help/faq.html#why-are-queries-with-arrays-failing" class="sidebar-link">Why are queries with arrays failing?</a></li><li class="sidebar-sub-header"><a href="/docs/help/faq.html#i-always-get-a-404-for-my-custom-middleware" class="sidebar-link">I always get a 404 for my custom middleware</a></li><li class="sidebar-sub-header"><a href="/docs/help/faq.html#my-configuration-isn-t-loaded" class="sidebar-link">My configuration isn't loaded</a></li><li class="sidebar-sub-header"><a href="/docs/help/faq.html#how-do-i-set-up-https" class="sidebar-link">How do I set up HTTPS?</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="content content__default"><h1 id="faq"><a href="#faq" class="header-anchor">#</a> FAQ</h1> <p>We've been collecting some commonly asked questions here. We'll either be updating the guide directly, providing answers here, or both.</p> <h2 id="why-should-i-use-feathers"><a href="#why-should-i-use-feathers" class="header-anchor">#</a> Why should I use Feathers?</h2> <p>There are many other Frameworks that let you build web applications so this is definitely a justified question. The key part for Feathers is that it takes a different approach to both, traditional MVC frameworks like Rails, Sails or NestJS and low level HTTP frameworks like Sinatra, Express (with which Feathers is fully compatible), Hapi or Koa. Instead of creating routes, controllers and HTTP request and response handlers, Feathers uses services and workflows (hooks) that let you focus on your application logic independently from how it is being accessed.</p> <p>This makes applications easier to understand and test and it allows Feathers to automatically provide REST APIs, websocket real-time APIs (which can often be quite a bit faster) and universal usage on the client and the server. It also makes it possible to add new communication protocols (like HTTP2 or GraphQL) without having to change anything in your application code. Feathers does all that while staying lightweight with a small API surface and codebase and flexible by letting you use it with the backend and frontend technology that best suits your needs.</p> <p>For more information</p> <ul><li><a href="https://blog.feathersjs.com/why-we-built-the-best-web-framework-you-ve-probably-never-heard-of-until-now-176afc5c6aac" target="_blank" rel="noopener noreferrer">Read about the philosophy behind Feathers and where it came from<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://blog.feathersjs.com/design-patterns-for-modern-web-apis-1f046635215" target="_blank" rel="noopener noreferrer">Learn about the high level design patterns behind Feathers<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://feathersjs.com/comparison" target="_blank" rel="noopener noreferrer">See how Feathers compares to others<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="is-feathers-production-ready"><a href="#is-feathers-production-ready" class="header-anchor">#</a> Is Feathers production ready?</h2> <p>Yes! Feathers had its first stable release in 2014 and is being used in production by a bunch of companies from startups to fortune 500s. For some more details see <a href="https://www.quora.com/Is-FeathersJS-production-ready" target="_blank" rel="noopener noreferrer">this answer on Quora<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h2 id="what-node-versions-does-feathers-support"><a href="#what-node-versions-does-feathers-support" class="header-anchor">#</a> What Node versions does Feathers support</h2> <p>Feathers supports all NodeJS versions from the current Active LTS upwards. See <a href="https://github.com/nodejs/Release#release-schedule" target="_blank" rel="noopener noreferrer">the Node.JS working group release schedule<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> for more information.</p> <h2 id="how-do-i-create-custom-methods"><a href="#how-do-i-create-custom-methods" class="header-anchor">#</a> How do I create custom methods?</h2> <p>One important thing to know about Feathers is that it only exposes the official <a href="/docs/api/services.html">service methods</a> to clients. While you can add and use any service method on the server, it is <strong>not</strong> possible to expose those custom methods to clients.</p> <p>Feathers is built around the <a href="https://en.wikipedia.org/wiki/Representational_state_transfer#Architectural_constraints" target="_blank" rel="noopener noreferrer">REST architectural constraints<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> and there are many good reasons for it. In general, almost anything that may require custom methods or RPC style actions can also be done either by creating a <a href="/docs/api/services.html">custom service</a> or through <a href="/docs/api/hooks.html">hooks</a>.</p> <p>The benefits (like security, predictability, sending well defined real-time events) so far heavily outweighed the slight change in thinking required when conceptualizing your application logic.</p> <p>Examples:</p> <ul><li>Send email action that does not store mail message in database.</li></ul> <p>Resources (services) don't have to be database records. It can be any kind of resource (like the current weather for a city or creating an email which will send it). Sending emails is usually done with either a separate email <a href="/docs/api/services.html">service</a>:</p> <div class="language-js extra-class"><pre class="language-js"><code>app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'/email'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token function">create</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">sendEmail</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>Or in a <a href="/docs/api/hooks.html">hook</a>.</p> <ul><li>Place an order in e-commerce web site. Behind the scenes, there are many records will be inserted in one transaction: order_item, order_header, voucher_tracking etc.</li></ul> <p>This is what <a href="/docs/api/hooks.html">Feathers hooks</a> are for. When creating a new order you also have a well defined hook chain:</p> <div class="language-js extra-class"><pre class="language-js"><code>app<span class="token punctuation">.</span><span class="token function">service</span><span class="token punctuation">(</span><span class="token string">'orders'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hooks</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  before<span class="token operator">:</span> <span class="token punctuation">{</span>
    create<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token function">validateData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token function">checkStock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token function">checkVoucher</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  after<span class="token operator">:</span> <span class="token punctuation">{</span>
    create<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token function">chargePayment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// hook that calls `app.service('payment').create()`</span>
      <span class="token function">sendEmail</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// hook that calls `app.service('email').create()`</span>
      <span class="token function">updateStock</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// Update product stock here</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>A <code>userService.resetPassword</code> method</li></ul> <p>This can also be implemented as a password service that resets the password in the <code>create</code> method:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> crypto <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'crypto'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">PasswordService</span> <span class="token punctuation">{</span>
  <span class="token function">create</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> userId <span class="token operator">=</span> data<span class="token punctuation">.</span>user_id<span class="token punctuation">;</span>
    <span class="token keyword">const</span> userService <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>app<span class="token punctuation">.</span><span class="token function">service</span><span class="token punctuation">(</span><span class="token string">'user'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token keyword">return</span> userService<span class="token punctuation">.</span><span class="token function">patch</span><span class="token punctuation">(</span>userId<span class="token punctuation">,</span> <span class="token punctuation">{</span>
      passwordToken<span class="token operator">:</span> crypto<span class="token punctuation">.</span><span class="token function">randomBytes</span><span class="token punctuation">(</span><span class="token number">48</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">user</span> <span class="token operator">=&gt;</span> <span class="token function">sendEmail</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token parameter">app</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>app <span class="token operator">=</span> app<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="how-do-i-do-nested-or-custom-routes"><a href="#how-do-i-do-nested-or-custom-routes" class="header-anchor">#</a> How do I do nested or custom routes?</h2> <p>Normally we find that they actually aren't needed and that it is much better to keep your routes as flat as possible. For example something like <code>users/:userId/posts</code> is - although nice to read for humans - actually not as easy to parse and process as the equivalent <code>/posts?userId=&lt;userid&gt;</code> that is already <a href="/docs/api/databases/querying.html">supported by Feathers out of the box</a>. Additionally, this will also work much better when using Feathers through websocket connections which do not have a concept of routes at all.</p> <p>However, nested routes for services can still be created by registering an existing service on the nested route and mapping the route parameter to a query parameter like this:</p> <div class="language-js extra-class"><pre class="language-js"><code>app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'/posts'</span><span class="token punctuation">,</span> postService<span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'/users'</span><span class="token punctuation">,</span> userService<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// re-export the posts service on the /users/:userId/posts route</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'/users/:userId/posts'</span><span class="token punctuation">,</span> app<span class="token punctuation">.</span><span class="token function">service</span><span class="token punctuation">(</span><span class="token string">'posts'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// A hook that updates `data` with the route parameter</span>
<span class="token keyword">function</span> <span class="token function">mapUserIdToData</span><span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span>data <span class="token operator">&amp;&amp;</span> context<span class="token punctuation">.</span>params<span class="token punctuation">.</span>route<span class="token punctuation">.</span>userId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    context<span class="token punctuation">.</span>data<span class="token punctuation">.</span>userId <span class="token operator">=</span> context<span class="token punctuation">.</span>params<span class="token punctuation">.</span>route<span class="token punctuation">.</span>userId<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// For the new route, map the `:userId` route parameter to the query in a hook</span>
app<span class="token punctuation">.</span><span class="token function">service</span><span class="token punctuation">(</span><span class="token string">'users/:userId/posts'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hooks</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  before<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      context<span class="token punctuation">.</span>params<span class="token punctuation">.</span>query<span class="token punctuation">.</span>userId <span class="token operator">=</span> context<span class="token punctuation">.</span>params<span class="token punctuation">.</span>route<span class="token punctuation">.</span>userId<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    create<span class="token operator">:</span> mapUserIdToData<span class="token punctuation">,</span>
    update<span class="token operator">:</span> mapUserIdToData<span class="token punctuation">,</span>
    patch<span class="token operator">:</span> mapUserIdToData
  <span class="token punctuation">}</span>  
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>Now going to <code>/users/123/posts</code> will call <code>postService.find({ query: { userId: 123 } })</code> and return all posts for that user.</p> <p>For more information about URL routing and parameters, refer to <a href="/docs/api/express.html">the Express chapter</a>.</p> <blockquote><p><strong>Note:</strong> URLs should never contain actions that change data (like <code>post/publish</code> or <code>post/delete</code>). This has always been an important part of the HTTP protocol and Feathers enforces this more strictly than most other frameworks. For example to publish a post you would call <code>.patch(id, { published: true })</code>.</p></blockquote> <h2 id="why-are-you-using-jwt-for-sessions"><a href="#why-are-you-using-jwt-for-sessions" class="header-anchor">#</a> Why are you using JWT for sessions</h2> <p>Feathers is using <a href="https://jwt.io/" target="_blank" rel="noopener noreferrer">JSON web tokens (JWT)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> for its standard authentication mechanism. Some articles like <a href="http://cryto.net/~joepie91/blog/2016/06/13/stop-using-jwt-for-sessions/" target="_blank" rel="noopener noreferrer">Stop using JWT for sessions<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> promotes using standard cookies and HTTP sessions. While it brings up some valid points, not all of them apply to Feathers and there are other good reasons why Feathers relies on JWT:</p> <ul><li>Feathers is designed to support many different transport mechanisms, most of which do not rely on HTTP but do work well with JWT as the authentication mechanism. This is even already the case for websockets where an established connection normally is not secured by a traditional HTTP session.</li> <li>By default the only thing that Feathers stored in the JWT payload is the user id. It is a stateful token. You can change this and make the token stateless by putting more data into the JWT payload but this is at your discretion. Currently the user is looked up on every request after the JWT is verified to not be expired or tampered with.</li> <li>You need to make sure that you revoke JWT tokens or set a low expiration date or add custom logic to verify that a user’s account is still valid/active. Currently the default expiration is 1 day. We chose a reasonable default for most apps but depending on your application this might be too long or too short.</li></ul> <p>Additionally, it is still possible to use Feathers with existing <em>traditional</em> Express session mechanism by using <a href="/docs/api/express.html">custom Express middleware</a>. For example, <code>params.user</code> for all service calls from a traditional Express session can be passed like this:</p> <div class="language-js extra-class"><pre class="language-js"><code>app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Set service call `param.user` from `session.user`</span>
  req<span class="token punctuation">.</span>feathers<span class="token punctuation">.</span>user <span class="token operator">=</span> req<span class="token punctuation">.</span>session<span class="token punctuation">.</span>user<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="can-you-support-another-database"><a href="#can-you-support-another-database" class="header-anchor">#</a> Can you support another database?</h2> <p>Feathers <a href="/docs/api/databases/adapters.html">database adapters</a> implement 90% of the functionality you may need to use Feathers with certain databases and ORMs. However, even if your favourite database or ORM is not on the list or the adapter does not support specific functionality you are looking for, Feathers can still accomodate all your needs by <a href="/docs/api/services.html">writing your own services</a>.</p> <blockquote><p><strong>Important:</strong> To use Feathers properly it is very important to understand how services work and that all existing database adapters are just services that talk to the database themselves.</p></blockquote> <p>The why and how to write your own services is covered <a href="/docs/guides/">in the Feathers guide</a>. In the generator a custom service can be created by running <code>feathers generate service</code>, choosing &quot;A custom service&quot; and then editing the <code>&lt;servicename&gt;/&lt;servicename&gt;.class.js</code> file to make the appropriate database calls.</p> <p>If you would like to publish your own database adapter, first make sure there isn't already a <a href="https://github.com/feathersjs/awesome-feathersjs#database" target="_blank" rel="noopener noreferrer">community maintained adapter<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> for that database (many maintainers are happy to get some help, too). If not, you can run <code>feathers generate plugin</code> to create a new plugin. A reference implementation for a database adapter can be found in the <a href="https://github.com/feathersjs-ecosystem/feathers-memory" target="_blank" rel="noopener noreferrer">feathers-memory repository<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. It is always possible for community maintained adapters to graduate into an <em>official</em> Feathers adapter, at the moment there are however no plans to add support for any new databases from the Feathers team directly.</p> <h2 id="how-do-i-watch-for-database-changes"><a href="#how-do-i-watch-for-database-changes" class="header-anchor">#</a> How do I watch for database changes?</h2> <p>In order to get real-time updates for a change, all requests have to go through your Feathers application or API server. Feathers does <em>not</em> watch the database for changes so if changes in the database are made outside of the Feathers application and clients should be notified, the notification needs to be sent manually.</p> <h2 id="i-am-not-getting-real-time-events"><a href="#i-am-not-getting-real-time-events" class="header-anchor">#</a> I am not getting real-time events</h2> <p>Feathers v3 (<code>@feathersjs/feathers@v3.0.0</code>) introduced a more secure event system that does <strong>not</strong> send real-time events by default. If you are not getting real-time events on the client, it is usually a problem with the <a href="/docs/api/channels.html">event channel</a> setup.</p> <p>Have a look a the <a href="/docs/guides/basics/starting.html">quick start</a> and the <a href="/docs/api/channels.html">channels documentation</a>.</p> <p>The generated application already sets up a <code>channels.js</code> file that sends events to only authenticated users by default but can be modified to your needs according the the <a href="/docs/api/channels.html">channels documentation</a>.</p> <h2 id="how-do-i-do-search"><a href="#how-do-i-do-search" class="header-anchor">#</a> How do I do search?</h2> <p>This depends on the database adapter you are using. See <a href="/docs/api/databases/querying.html#search">the search querying chapter</a> for more information.</p> <h2 id="why-am-i-not-getting-json-errors"><a href="#why-am-i-not-getting-json-errors" class="header-anchor">#</a> Why am I not getting JSON errors?</h2> <p>If you get a plain text error and a 500 status code for errors that should return different status codes, make sure you have the <code>express.errorHandler()</code> from the <code>@feathersjs/express</code> module configured as described in the <a href="/docs/api/express.html#expresserrorhandler">Express errors</a> chapter.</p> <h2 id="why-am-i-not-getting-the-correct-http-error-code"><a href="#why-am-i-not-getting-the-correct-http-error-code" class="header-anchor">#</a> Why am I not getting the correct HTTP error code</h2> <p>See the above answer.</p> <h2 id="how-can-i-do-custom-methods-like-findorcreate"><a href="#how-can-i-do-custom-methods-like-findorcreate" class="header-anchor">#</a> How can I do custom methods like <code>findOrCreate</code>?</h2> <p>Custom functionality can almost always be mapped to an existing service method using hooks.  For example, <code>findOrCreate</code> can be implemented as a before-hook on the service's <code>get</code> method.  <a href="https://gist.github.com/marshallswain/9fa3b1e855633af00998" target="_blank" rel="noopener noreferrer">See this gist<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> for an example of how to implement this in a before-hook.</p> <h2 id="how-do-i-render-templates"><a href="#how-do-i-render-templates" class="header-anchor">#</a> How do I render templates?</h2> <p>Feathers works just like Express so it's the exact same. Here is <a href="/docs/cookbook/express/view-engine.html">a cookbook recipe</a>.</p> <h2 id="how-do-i-create-channels-or-rooms"><a href="#how-do-i-create-channels-or-rooms" class="header-anchor">#</a> How do I create channels or rooms</h2> <p>In Feathers <a href="/docs/api/channels.html">channels</a> are the way to send <a href="/docs/api/events.html">real-time events</a> to only certain clients.</p> <h2 id="how-do-i-do-validation"><a href="#how-do-i-do-validation" class="header-anchor">#</a> How do I do validation?</h2> <p>If your database/ORM supports a model or schema (ie. Mongoose or Sequelize) then you have 2 options.</p> <h4 id="the-preferred-way"><a href="#the-preferred-way" class="header-anchor">#</a> The preferred way</h4> <p>You perform validation at the service level <a href="/docs/api/hooks.html">using hooks</a>. This is better because it keeps your app database agnostic so you can easily swap databases without having to change your validations much.</p> <p>If you write a bunch of small hooks that validate specific things it is easier to test and also slightly more performant because you can exit out of the validation chain early instead of having to go all the way to the point of inserting data into the database to find out if that data is invalid.</p> <p>If you don't have a model or schema then validating with hooks is currently your only option. If you come up with something different feel free to submit a PR!</p> <h4 id="the-orm-way"><a href="#the-orm-way" class="header-anchor">#</a> The ORM way</h4> <p>With ORM adapters you can perform validation at the model level:</p> <ul><li><a href="https://github.com/feathersjs-ecosystem/feathers-mongoose#validation" target="_blank" rel="noopener noreferrer">Using Mongoose<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="http://docs.sequelizejs.com/en/latest/docs/models-definition/#validations" target="_blank" rel="noopener noreferrer">Using Sequelize<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <p>The nice thing about the model level validations is Feathers will return the validation errors to the client in a nice consistent format for you.</p> <h2 id="how-do-i-do-associations"><a href="#how-do-i-do-associations" class="header-anchor">#</a> How do I do associations?</h2> <p>Similar to validation, it depends on if your database/ORM supports models or not.</p> <h4 id="the-preferred-way-2"><a href="#the-preferred-way-2" class="header-anchor">#</a> The preferred way</h4> <p>For any of the feathers database/ORM adapters you can just use <a href="/docs/api/hooks.html">hooks</a> to fetch data from other services.</p> <p>This is a better approach because it keeps your application database agnostic and service oriented. By referencing the services (using <code>app.service().find()</code>, etc.) you can still decouple your app and have these services live on entirely separate machines or use entirely different databases without having to change any of your fetching code. We show how to associate data in a hook in the <a href="/docs/guides/">Feathers guide</a>. An alternative are the <a href="https://feathers-plus.github.io/v1/feathers-hooks-common/#fastjoin" target="_blank" rel="noopener noreferrer">fastJoin<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> or <a href="https://feathers-plus.github.io/v1/feathers-hooks-common/#populate" target="_blank" rel="noopener noreferrer">populate<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> in <a href="https://feathers-plus.github.io/v1/feathers-hooks-common/" target="_blank" rel="noopener noreferrer">feathers-hooks-common<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h4 id="the-orm-way-2"><a href="#the-orm-way-2" class="header-anchor">#</a> The ORM way</h4> <p>With mongoose you can use the <code>$populate</code> query param to populate nested documents.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Find Hulk Hogan and include all the messages he sent</span>
app<span class="token punctuation">.</span><span class="token function">service</span><span class="token punctuation">(</span><span class="token string">'user'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  query<span class="token operator">:</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'hulk@hogan.net'</span><span class="token punctuation">,</span>
    $populate<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'sentMessages'</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>With Sequelize you can do this:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Find Hulk Hogan and include all the messages he sent</span>
app<span class="token punctuation">.</span><span class="token function">service</span><span class="token punctuation">(</span><span class="token string">'user'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'hulk@hogan.net'</span><span class="token punctuation">,</span>
  sequelize<span class="token operator">:</span> <span class="token punctuation">{</span>
    include<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
      model<span class="token operator">:</span> Message<span class="token punctuation">,</span>
      where<span class="token operator">:</span> <span class="token punctuation">{</span> sender<span class="token operator">:</span> Sequelize<span class="token punctuation">.</span><span class="token function">col</span><span class="token punctuation">(</span><span class="token string">'user.id'</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Or set it in a hook as <a href="https://github.com/feathersjs-ecosystem/feathers-sequelize#associations-and-relations" target="_blank" rel="noopener noreferrer">described here<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h2 id="sequelize-models-and-associations"><a href="#sequelize-models-and-associations" class="header-anchor">#</a> Sequelize models and associations</h2> <p>If you are using the <a href="http://docs.sequelizejs.com/" target="_blank" rel="noopener noreferrer">Sequelize<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> adapter, understanding SQL and Sequelize first is very important. See the <a href="https://github.com/feathersjs-ecosystem/feathers-sequelize#associations" target="_blank" rel="noopener noreferrer">associations section in the feathers-sequelize documentation<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> for more information on how to associate models using the Sequelize Feathers adapter.</p> <h2 id="how-do-i-access-the-request-object-in-hooks-or-services"><a href="#how-do-i-access-the-request-object-in-hooks-or-services" class="header-anchor">#</a> How do I access the request object in hooks or services?</h2> <p>In short, you shouldn't need to. If you look at the <a href="/docs/api/hooks.html">hooks chapter</a> you'll see all the params that are available on a hook.</p> <p>If you still need something from the request object (for example, the requesting IP address) you can simply tack it on to the <code>req.feathers</code> object <a href="/docs/api/express.html#params">as described here</a> or <code>socket.feathers</code> when using web sockets as <a href="/docs/api/socketio.html#appconfiguresocketiocallback">described here</a>.</p> <h2 id="how-do-i-mount-sub-apps"><a href="#how-do-i-mount-sub-apps" class="header-anchor">#</a> How do I mount sub apps?</h2> <p>It's pretty much exactly the same as Express. More information can be found <a href="/docs/api/express.html#sub-apps">here</a>.</p> <h2 id="how-do-i-do-some-processing-after-sending-the-response-to-the-user"><a href="#how-do-i-do-some-processing-after-sending-the-response-to-the-user" class="header-anchor">#</a> How do I do some processing after sending the response to the user?</h2> <p>The hooks workflow allows you to handle these situations quite gracefully.  It depends if you <code>await</code> or not in your hook. Here's an example of a hook that sends an email, but doesn't wait for a success message.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">async</span> <span class="token parameter">context</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  
  <span class="token comment">// Send an email by calling to the email service.</span>
  context<span class="token punctuation">.</span>app<span class="token punctuation">.</span><span class="token function">service</span><span class="token punctuation">(</span><span class="token string">'emails'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    to<span class="token operator">:</span> <span class="token string">'user@email.com'</span><span class="token punctuation">,</span>
    body<span class="token operator">:</span> <span class="token string">'You are so great!'</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  <span class="token comment">// Send a message to some logging service.</span>
  context<span class="token punctuation">.</span>app<span class="token punctuation">.</span><span class="token function">service</span><span class="token punctuation">(</span><span class="token string">'logging'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  <span class="token keyword">return</span> context<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="how-do-i-debug-my-app"><a href="#how-do-i-debug-my-app" class="header-anchor">#</a> How do I debug my app</h2> <p>It's really no different than debugging any other NodeJS app but you can refer to <a href="https://blog.feathersjs.com/debugging-feathers-with-visual-studio-code-406e6adf2882" target="_blank" rel="noopener noreferrer">this blog post<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> for more Feathers specific tips and tricks.</p> <h2 id="possible-eventemitter-memory-leak-detected-warning"><a href="#possible-eventemitter-memory-leak-detected-warning" class="header-anchor">#</a> <code>possible EventEmitter memory leak detected</code> warning</h2> <p>This warning is not as bad as it sounds. If you got it from Feathers you most likely registered more than 64 services and/or event listeners on a Socket. If you don't think there are that many services or event listeners you may have a memory leak. Otherwise you can increase the number in the <a href="/docs/api/socketio.html">Socket.io configuration</a> via <code>io.sockets.setMaxListeners(number)</code> and with <a href="/docs/api/primus.html">Primus</a> via <code>primus.setMaxListeners(number)</code>. <code>number</code> can be <code>0</code> for unlimited listeners or any other number of how many listeners you'd expect in the worst case.</p> <p>For example, if you need 555 listeners, you can do this in your <code>src/app.js</code> file by replacing <code>app.configure(socketio());</code> with <code>app.configure(socketio(function(io) {io.sockets.setMaxListeners(555);}));</code>.</p> <h2 id="why-can-t-i-pass-params-from-the-client"><a href="#why-can-t-i-pass-params-from-the-client" class="header-anchor">#</a> Why can't I pass <code>params</code> from the client?</h2> <p>When you make a call like:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> params <span class="token operator">=</span> <span class="token punctuation">{</span> foo<span class="token operator">:</span> <span class="token string">'bar'</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
client<span class="token punctuation">.</span><span class="token function">service</span><span class="token punctuation">(</span><span class="token string">'users'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">patch</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> admin<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> params<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// handle response</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>on the client the <code>context.params</code> object will only be available in your client side hooks. It will not be provided to the server. The reason for this is because <code>context.params</code> on the server usually contains information that should be server-side only. This can be database options, whether a request is authenticated, etc. If we passed those directly from the client to the server this would be a big security risk. Only the client side <code>context.params.query</code> and <code>context.params.headers</code> objects are provided to the server.</p> <p>If you need to pass info from the client to the server that is not part of the query you need to add it to <code>context.params.query</code> on the client side and explicitly pull it out of <code>context.params.query</code> on the server side. This can be achieved like so:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// client side</span>
client<span class="token punctuation">.</span><span class="token function">hooks</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  before<span class="token operator">:</span> <span class="token punctuation">{</span>
    all<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token parameter">context</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        context<span class="token punctuation">.</span>params<span class="token punctuation">.</span>query<span class="token punctuation">.</span>$client <span class="token operator">=</span> <span class="token punctuation">{</span>
          platform<span class="token operator">:</span> <span class="token string">'ios'</span><span class="token punctuation">,</span>
          version<span class="token operator">:</span> <span class="token string">'1.0'</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        
        <span class="token keyword">return</span> context<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// server side, inside app.hooks.js</span>
<span class="token keyword">const</span> hooks <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'feathers-hooks-common'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  before<span class="token operator">:</span> <span class="token punctuation">{</span>
    all<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token comment">// remove values from context.params.query.$client and move them to context.params</span>
      <span class="token comment">// so context.params.query.$client.version -&gt; context.params.version</span>
      <span class="token comment">// and context.params.query.$client is removed.</span>
      hooks<span class="token punctuation">.</span><span class="token function">client</span><span class="token punctuation">(</span><span class="token string">'version'</span><span class="token punctuation">,</span> <span class="token string">'platform'</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="my-queries-with-null-values-aren-t-working"><a href="#my-queries-with-null-values-aren-t-working" class="header-anchor">#</a> My queries with null values aren't working</h2> <p>When making a request using REST (HTTP) query <em>string</em> values don't have any type information and will always be strings. Some database adapters that have a schema (like <code>feathers-mongoose</code> or <code>feathers-sequelize</code>) will try to convert values to the correct type but others (like <code>feathers-mongodb</code>) can't. Additionally, <code>null</code> will always be a string and always has to be converted if you want to query for <code>null</code>. This can be done in a <code>before</code> <a href="/docs/api/hooks.html">hook</a>:</p> <div class="language-js extra-class"><pre class="language-js"><code>app<span class="token punctuation">.</span><span class="token function">service</span><span class="token punctuation">(</span><span class="token string">'myservice'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hooks</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  before<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> <span class="token punctuation">{</span> params<span class="token operator">:</span> <span class="token punctuation">{</span> query <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token operator">=</span> context<span class="token punctuation">;</span>

      <span class="token keyword">if</span><span class="token punctuation">(</span>query<span class="token punctuation">.</span>phone <span class="token operator">===</span> <span class="token string">'null'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        query<span class="token punctuation">.</span>phone <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      context<span class="token punctuation">.</span>params<span class="token punctuation">.</span>query <span class="token operator">=</span> query<span class="token punctuation">;</span>

      <span class="token keyword">return</span> context<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Also see <a href="https://github.com/feathersjs/feathers/issues/894" target="_blank" rel="noopener noreferrer">this issue<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <blockquote><p><strong>Note:</strong> This issue does not happen when using websockets since it retains all type information.</p></blockquote> <h2 id="why-are-queries-with-arrays-failing"><a href="#why-are-queries-with-arrays-failing" class="header-anchor">#</a> Why are queries with arrays failing?</h2> <p>If you are using REST and queries with larger arrays (more than 21 items to be exact) are failing, you are probably running into an issue with the <a href="https://github.com/ljharb/qs" target="_blank" rel="noopener noreferrer">querystring<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> module which <a href="https://github.com/ljharb/qs#parsing-arrays" target="_blank" rel="noopener noreferrer">limits the size of arrays to 21 items<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> by default. The recommended solution is to implement a custom query string parser function via <code>app.set('query parser', parserFunction)</code> with the <code>arrayLimit</code> option set to a higher value:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> qs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'qs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'query parser'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> qs<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    arrayLimit<span class="token operator">:</span> <span class="token number">100</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>For more information see the <a href="http://expressjs.com/en/4x/api.html#app.set" target="_blank" rel="noopener noreferrer">Express application settings<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <a href="https://github.com/feathersjs/feathers-rest/issues/88" target="_blank" rel="noopener noreferrer">@feathersjs/rest#88<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> and <a href="https://github.com/feathersjs-ecosystem/feathers-mongoose/issues/205" target="_blank" rel="noopener noreferrer">feathers-mongoose#205<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h2 id="i-always-get-a-404-for-my-custom-middleware"><a href="#i-always-get-a-404-for-my-custom-middleware" class="header-anchor">#</a> I always get a 404 for my custom middleware</h2> <p>Just like in Express itself, the order of middleware matters. If you registered a custom middleware outside of the generator, you have to make sure that it runs before the <code>notFound()</code> error midlleware.</p> <h2 id="my-configuration-isn-t-loaded"><a href="#my-configuration-isn-t-loaded" class="header-anchor">#</a> My configuration isn't loaded</h2> <p>If you are running or requiring the Feathers app from a different folder <a href="/docs/api/configuration.html">Feathers configuration</a> needs to be instructed where the configuration files for the app are located. Since it uses <a href="https://github.com/lorenwest/node-config" target="_blank" rel="noopener noreferrer">node-config<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> this can be done by setting the <a href="https://github.com/lorenwest/node-config/wiki/Environment-Variables#node_config_dir" target="_blank" rel="noopener noreferrer">NODE_CONFIG_DIR envorinment variable<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h2 id="how-do-i-set-up-https"><a href="#how-do-i-set-up-https" class="header-anchor">#</a> How do I set up HTTPS?</h2> <p>In most production environments your Feathers application should be behind an NginX proxy that handles HTTPS. It is also possible to add SSL directly to your Feathers application which is described in the <a href="/docs/api/express.html#https">Express HTTPS docs</a>.</p></div> <footer class="page-edit"><blockquote><p>
        Anything unclear or missing?
        <a href="/help" rel="noopener noreferrer">
          Get help
        </a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span> or <a href="https://github.com/feathersjs-offline/docs/edit/master/docs/help/faq.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></p> <small><span class="prefix">Last Updated: </span> <span class="time">11/17/2020, 3:17:03 PM</span></small></blockquote></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/docs/help/" class="prev router-link-active">
          Getting Help
        </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/docs/assets/js/app.755caa04.js" defer></script><script src="/docs/assets/js/4.40f59cee.js" defer></script><script src="/docs/assets/js/71.3106b414.js" defer></script>
  </body>
</html>
